<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ trans.t_translated_report }}</title>
    <style>
        @font-face {
            font-family: "DejaVuSans";
            src: url("/static/fonts/DejaVuSans.ttf") format("truetype");
            /* You must provide a valid path to a font that supports the target language characters */
        }
        body {
            font-family: "DejaVuSans", sans-serif;
            font-size: 10px;
        }
        small {
            font-size: 10px; /* Increase size of small text for readability */
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            word-wrap: break-word;
        }
        th {
            border: 1px solid #ddd;
            padding: 4px 8px 2px 8px; /* Reduced bottom padding */
            text-align: left;
            word-wrap: break-word;
            background-color: #f2f2f2;
        }
        .time-col {
            width: 15%;
            white-space: nowrap;
        }
        .duration-col {
            width: 10%;
            white-space: nowrap;
        }
        .center-col {
            text-align: center;
        }
        {% if is_rtl %}
        body {
            direction: rtl;
        }
        th, td {
            text-align: right;
        }
        .center-col {
            text-align: center; /* Keep centered columns centered */
        }
        {% endif %}
    </style>
</head>
<body>
    <h1>{{ trans.t_translated_report }}</h1>
    <p><strong>{{ trans.t_project }}:</strong> {{ project.name|default:trans.t_all_projects }}</p>
    <p><strong>{{ trans.t_date_range }}:</strong> {{ start_date }} to {{ end_date }}</p>
    <p><strong>{{ trans.t_language }}:</strong> {{ target_language }}</p>
    <br>
    <table>
        <thead>
            <tr>
                {% if is_rtl %}
                    <th class="duration-col center-col">{{ trans.t_duration }}</th>
                    <th class="time-col center-col">{{ trans.t_end_time }}</th>
                    <th class="time-col center-col">{{ trans.t_start_time }}</th>
                    <th class="center-col">{{ trans.t_details }}</th>
                {% else %}
                    <th class="center-col">{{ trans.t_details }}</th>
                    <th class="time-col center-col">{{ trans.t_start_time }}</th>
                    <th class="time-col center-col">{{ trans.t_end_time }}</th>
                    <th class="duration-col center-col">{{ trans.t_duration }}</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for entry in entries %}
            <tr>
                {% if is_rtl %}
                    <td class="center-col">{{ entry.formatted_duration }}</td>
                    <td class="center-col">{{ entry.original.end_time|date:"Y-m-d H:i" }}</td>
                    <td class="center-col">{{ entry.original.start_time|date:"Y-m-d H:i" }}</td>
                    <td>
                        {% if not project %}
                        <span><strong>{{ trans.t_project }}:</strong> {{ entry.original.project.name|default:"-" }}</span><br>
                        {% endif %}
                        <span><strong>{{ trans.t_entry }}:</strong> {{ entry.title }}</span>
                        <br><br>
                        <small><strong>{{ trans.t_description }}:</strong><br>
                        <small>{{ entry.description|default:"-" }}</small>
                        <br><br>
                        <small><strong>{{ trans.t_notes }}:</strong><br>
                        <small>{{ entry.notes|default:"-" }}</small>
                    </td>
                {% else %}
                    <td>
                        {% if not project %}
                        <span><strong>{{ trans.t_project }}:</strong> {{ entry.original.project.name|default:"-" }}</span><br>
                        {% endif %}
                        <span><strong>{{ trans.t_entry }}:</strong> {{ entry.title }}</span>
                        <br><br>
                        <small><strong>{{ trans.t_description }}:</strong><br>
                        <small>{{ entry.description|default:"-" }}</small>
                        <br><br>
                        <small><strong>{{ trans.t_notes }}:</strong><br>
                        <small>{{ entry.notes|default:"-" }}</small>
                    </td>
                    <td class="center-col">{{ entry.original.start_time|date:"Y-m-d H:i" }}</td>
                    <td class="center-col">{{ entry.original.end_time|date:"Y-m-d H:i" }}</td>
                    <td class="center-col">{{ entry.formatted_duration }}</td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">{{ trans.t_no_entries }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
